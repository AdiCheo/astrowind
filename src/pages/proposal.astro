---
// src/pages/proposal/magnitude-summer-camp.astro
import Layout from '~/layouts/PageLayout.astro'; // Assuming this is your layout component
// import Chart from 'chartjs'; // Chart.js is loaded via CDN in this example
import Hero from '~/components/widgets/Hero.astro';
import Note from '~/components/widgets/Note.astro';
import Features from '~/components/widgets/Features.astro';
import Features2 from '~/components/widgets/Features2.astro';
import Steps from '~/components/widgets/Steps.astro';
import Content from '~/components/widgets/Content.astro';
import BlogLatestPosts from '~/components/widgets/BlogLatestPosts.astro';
import FAQs from '~/components/widgets/FAQs.astro';
import Stats from '~/components/widgets/Stats.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';

const metadata = {
  title: 'Magnitude Proposal',
  ignoreTitleTemplate: true,
};

// Data for Enrollment Chart
const enrollmentData = {
  weeks: ['Wk 1', 'Wk 2', 'Wk 3', 'Wk 4', 'Wk 5', 'Wk 6', 'Wk 7', 'Wk 8', 'Wk 9'],
  ridgewaySignups: [16, 32, 33, 40, 27, 22, 17, 20, 16],
  royalWindsorSignups: [10, 34, 24, 49, 36, 16, 33, 30, 19],
  capacityPerLocation: 80,
};

const ridgewayRemaining = enrollmentData.ridgewaySignups.map((s) => enrollmentData.capacityPerLocation - s);
const royalWindsorRemaining = enrollmentData.royalWindsorSignups.map((s) => enrollmentData.capacityPerLocation - s);

const totalCapacityKidWeeks = 160 * 9; // 1440
const ridgewayFilledSlots = 223; // enrollmentData.ridgewaySignups.reduce((a, b) => a + b, 0);
const royalWindsorFilledSlots = 251; // enrollmentData.royalWindsorSignups.reduce((a, b) => a + b, 0);
const totalFilledSlots = ridgewayFilledSlots + royalWindsorFilledSlots; // 474
const remainingKidWeekSlots = totalCapacityKidWeeks - totalFilledSlots; // 966

// General Proposal Data
const consultantName = 'Adrian Cheoreanu';
const clientName = 'Magnitude';
const contactPerson = 'Duane Plata';
const clientTitle = 'Owner';
const date = 'May 15, 2025';
const locations = 'Ridgeway and Royal Windsor locations in Mississauga';
const weeklyCapacity = 160;
const capacityPerLocation = 80;
const campPricePerWeek = 335;
const currentCPA = 109;

// Data for Campaign Timeline Chart (Pre-Camp: May 15 - June 29)
const campaignTimelineData = {
  labels: ['May 12-18', 'May 19-25', 'May 26-Jun 1', 'Jun 2-8', 'Jun 9-15', 'Jun 16-22', 'Jun 23-29'],
  projectedAdSpend: [500, 1000, 1500, 2000, 2500, 2000, 1500], // Placeholder $
  projectedLeads: [50, 100, 150, 200, 250, 200, 150], // Placeholder count
  projectedNewSignups: [10, 20, 30, 40, 50, 30, 20], // Placeholder unique children
  // Calculate cumulative signups
  get cumulativeSignups() {
    let sum = 0;
    return this.projectedNewSignups.map((value) => (sum += value));
  },
};

const sections = [
  {
    title: '1. Understanding Your Needs',
    id: 'understanding-needs',
    content: `
      <p class="mb-4">${clientName} is a respected Taekwondo school dedicated to fostering discipline, confidence, and physical fitness in its students, with established locations at <strong>${locations}</strong>. This summer, you are launching a key initiative: a summer camp program designed for children aged 5 to 12. Each location has a capacity of ${capacityPerLocation} children per week, making a combined <strong>total weekly capacity of ${weeklyCapacity} participants</strong>. The primary goal is to maximize enrollment at both locations for all 9 weeks of the camp.</p>
      <h3 class="text-xl font-semibold text-slate-700 mb-3">Current Enrollment Snapshot (as of May 15, 2025):</h3>
      <div class="bg-slate-50 p-4 rounded-lg shadow mb-6">
        <p class="mb-2">Based on the data provided:</p>
        <ul class="list-disc list-inside mb-4 space-y-1 text-slate-600">
          <li><strong>Total Weekly Capacity (9 weeks, 2 locations):</strong> ${totalCapacityKidWeeks.toLocaleString()} "kid-week" slots (${weeklyCapacity} spots/week * 9 weeks)</li>
          <li><strong>Current Filled "kid-week" slots:</strong>
            <ul class="list-disc list-inside ml-6">
              <li>Ridgeway: ${ridgewayFilledSlots} slots filled (average ${(ridgewayFilledSlots / 9).toFixed(1)} kids/week)</li>
              <li>Royal Windsor: ${royalWindsorFilledSlots} slots filled (average ${(royalWindsorFilledSlots / 9).toFixed(1)} kids/week)</li>
              <li><strong>Total: ${totalFilledSlots} slots filled (average ${(totalFilledSlots / 9).toFixed(1)} kids/week combined)</strong></li>
            </ul>
          </li>
          <li><strong>Remaining "kid-week" slots to fill:</strong> <strong class="text-orange-600 text-lg">${remainingKidWeekSlots.toLocaleString()}</strong></li>
          <li><strong>Observation:</strong> While Week 4 shows the highest current enrollment (${enrollmentData.ridgewaySignups[3] + enrollmentData.royalWindsorSignups[3]} combined), all weeks across both locations have significant room for growth to reach the ${capacityPerLocation}-kid capacity per location. Weeks 1, 6, and 9 currently show the lowest enrollment.</li>
        </ul>
        <p class="text-sm text-slate-500 mb-4">This data underscores a significant opportunity to boost registrations across all weeks and for both the Ridgeway and Royal Windsor locations.</p>
        <div class="my-6" style="position: relative; min-height: 400px;">
          <canvas id="enrollmentChart"></canvas>
        </div>
      </div>
      <h3 class="text-xl font-semibold text-slate-700 mb-3">Primary Objectives for this Summer Camp:</h3>
      <ul class="list-disc list-inside space-y-1 text-slate-600">
        <li><strong>Fill ${weeklyCapacity} Summer Camp Spots Weekly:</strong> Achieve maximum capacity of ${capacityPerLocation} children per week at the Ridgeway location and ${capacityPerLocation} children per week at the Royal Windsor location for all 9 weeks.</li>
        <li><strong>Targeted Outreach for Each Location:</strong> Effectively reach parents of children aged 5-12 in the specific local areas surrounding both Ridgeway and Royal Windsor in Mississauga.</li>
        <li><strong>Drive Registrations via Digital Channels:</strong> Leverage Google Ads and Facebook Ads to generate awareness and direct parents to a clear registration process for their preferred location.</li>
        <li><strong>Improve on Current Cost Per Acquisition (CPA):</strong> Aim to achieve a CPA lower than the current $${currentCPA} for each unique child enrolled.</li>
        <li><strong>Maximize ROI on Ad Spend:</strong> Ensure advertising budgets are used efficiently.</li>
        <li><strong>Brand Awareness:</strong> Increase local awareness of ${clientName} and its offerings at both Mississauga locations.</li>
        <li><strong>Streamlined Registration & Communication:</strong> Efficiently manage inquiries, registrations, and communications.</li>
      </ul>
      <p class="mt-4">Our proposed services are meticulously tailored to address these specific needs and deliver a successful summer camp enrollment campaign for both your Mississauga locations.</p>
    `,
  },
  {
    title: '2. Proposed Services',
    id: 'proposed-services',
    subSections: [
      {
        title: '2.1. Strategic Summer Camp Advertising Management (Google & Facebook Ads for Two Locations)',
        content: `
          <ul class="list-disc list-inside space-y-2 text-slate-600">
            <li><strong>Strategy & Planning:</strong>
              <ul class="list-circle list-inside ml-6 space-y-1">
                <li>In-depth consultation to understand the unique selling propositions of your Taekwondo summer camp (e.g., activities, learning outcomes, price per week: $${campPricePerWeek}) and any differences in appeal for the communities around Ridgeway vs. Royal Windsor.</li>
                <li>Defining hyper-local target audiences (parents of children 5-12) for <strong>each Mississauga location</strong> on Google and Facebook.</li>
                <li>Keyword research for Google Ads, potentially with location-specific terms (e.g., "kids summer camp Ridgeway Mississauga", "Royal Windsor Mississauga martial arts camp").</li>
                <li>Audience segmentation for Facebook Ads, tailored for each location's catchment area.</li>
                <li>Setting clear campaign objectives (registrations per location per week) and KPIs (e.g., target CPA below $${currentCPA}, cost per registration, conversion rate by location).</li>
                <li>Developing strategies to promote less popular weeks more aggressively.</li>
              </ul>
            </li>
            <li><strong>Campaign Creation & Execution:</strong>
              <ul class="list-circle list-inside ml-6 space-y-1">
                <li>Crafting compelling ad copy and visually appealing ad creatives, potentially highlighting location-specific benefits or imagery if applicable.</li>
                <li>Setting up and structuring distinct or geo-targeted campaigns for Ridgeway and Royal Windsor on Google Ads and Facebook/Instagram Ads.</li>
                <li>Implementing conversion tracking to measure registrations per location.</li>
                <li>Rigorous A/B testing of ad copy, visuals, calls-to-action, and audience targeting for each location.</li>
              </ul>
            </li>
            <li><strong>Budget Optimization & Management:</strong>
              <ul class="list-circle list-inside ml-6 space-y-1">
                <li>Strategic allocation of your advertising budget across platforms and between the two locations based on performance and need.</li>
                <li>Daily/weekly monitoring and adjustment of bids and budgets.</li>
              </ul>
            </li>
            <li><strong>Performance Monitoring & Reporting:</strong>
              <ul class="list-circle list-inside ml-6 space-y-1">
                <li>Continuous tracking of campaign performance against KPIs, <strong>broken down by location and by week.</strong></li>
                <li>Regular reports detailing ad spend, registrations (Ridgeway vs. Royal Windsor), CPA, and insights for ongoing optimization.</li>
              </ul>
            </li>
            <li><strong>Benefit to ${clientName}:</strong> Targeted exposure to local parents for both Ridgeway and Royal Windsor, a significant increase in camp inquiries and registrations for each location, efficient use of your advertising budget to fill the <strong>${weeklyCapacity} weekly spots (${capacityPerLocation} per location)</strong>, aiming for a CPA below $${currentCPA}.</li>
          </ul>
        `,
      },
      {
        title: '2.2. Website & Landing Page Optimization for Camp Registrations (Dual Location Focus)',
        content: `
          <ul class="list-disc list-inside space-y-2 text-slate-600">
            <li><strong>Camp Information Hub (Website):</strong>
              <ul class="list-circle list-inside ml-6 space-y-1">
                <li>Ensuring your website clearly presents summer camp information for <strong>both Ridgeway and Royal Windsor locations</strong>, making it easy for parents to find details for their preferred site (dates, 9 weeks, times, age groups 5-12, activities, pricing: $${campPricePerWeek}/week).</li>
                <li>Adding clear CTAs like "Register for Ridgeway Camp!" and "Register for Royal Windsor Camp!"</li>
              </ul>
            </li>
            <li><strong>High-Converting Camp Landing Pages (Potentially one adaptable page or two distinct pages):</strong>
              <ul class="list-circle list-inside ml-6 space-y-1">
                <li>Designing and developing a dedicated landing page (or pages) for summer camp registrations, optimized for conversions and clearly differentiating or allowing selection between Ridgeway and Royal Windsor.</li>
                <li><strong>Key elements:</strong> Compelling headlines, engaging visuals, clear explanation of camp details per location, easy-to-use registration form (with location selection), and prominent CTAs.</li>
              </ul>
            </li>
            <li><strong>Analytics & Reporting:</strong>
              <ul class="list-circle list-inside ml-6 space-y-1">
                <li>Tracking landing page views, form submissions, and conversion rates, segmented by location interest if possible.</li>
              </ul>
            </li>
            <li><strong>Benefit to ${clientName}:</strong> A clear online pathway for parents to register for their preferred Mississauga location, leading to higher conversion rates.</li>
          </ul>
        `,
      },
      {
        title: '2.3. Social Media Promotion for Summer Camp (Highlighting Both Locations)',
        content: `
          <ul class="list-disc list-inside space-y-2 text-slate-600">
            <li><strong>Content Strategy & Creation:</strong> Developing content that can be tailored or specifically tagged for Ridgeway and Royal Windsor audiences. Showcasing activities, instructors, or testimonials relevant to each location if possible.</li>
            <li><strong>Community Engagement:</strong> Engaging with local community groups online relevant to each Mississauga location.</li>
            <li><strong>Benefit to ${clientName}:</strong> Increased organic reach and buzz around your summer camp at both locations.</li>
          </ul>
        `,
      },
      {
        title: '2.4. Lead & Registration Management (CRM & Email for 160 Weekly Spots)',
        content: `
          <ul class="list-disc list-inside space-y-2 text-slate-600">
            <li><strong>CRM/Database Setup for Campers:</strong> Assisting with setting up or optimizing a system to manage inquiries and registrations, clearly segmenting by location (Ridgeway/Royal Windsor) and week, towards the <strong>${weeklyCapacity} weekly spots (${capacityPerLocation} per location)</strong>.</li>
            <li><strong>Email Communication Strategy:</strong> Developing email templates that can be customized with location-specific details if necessary (e.g., directions to Ridgeway vs. Royal Windsor).</li>
            <li><strong>Benefit to ${clientName}:</strong> An organized system to track progress towards filling capacity at both locations, professional communication with parents.</li>
          </ul>
        `,
      },
      {
        title: '2.5. [Optional Add-On] Digital Media Support',
        content: `
          <ul class="list-disc list-inside space-y-2 text-slate-600">
            <li><strong>Visual Content Creation:</strong> Assistance in creating visuals that can represent both locations or be easily adapted.</li>
            <li><strong>Benefit to ${clientName}:</strong> High-quality visuals to enhance ad performance.</li>
          </ul>
        `,
      },
      {
        title: '2.6. [Optional Add-On] Operational Support for Camp Onboarding',
        content: `
          <ul class="list-disc list-inside space-y-2 text-slate-600">
            <li><strong>Streamlining Registration Process:</strong> Ensuring the process is smooth for selecting and registering for either Ridgeway or Royal Windsor.</li>
            <li><strong>Benefit to ${clientName}:</strong> A smoother experience for parents, reducing administrative burden.</li>
          </ul>
        `,
      },
    ],
  },
  {
    title: '3. Our Approach: A Partnership for a Full Summer Camp (Ridgeway & Royal Windsor)',
    id: 'our-approach',
    content: `
      <p class="mb-4">Our methodology is built on collaboration, transparency, data-driven insights, and a relentless focus on achieving your goal of <strong>${weeklyCapacity} weekly summer camp registrations (${capacityPerLocation} per location)</strong>.</p>
      <ol class="list-decimal list-inside space-y-2 text-slate-600 mb-6">
        <li><strong>Discovery & Strategic Planning:</strong> We'll start by deeply understanding your camp's unique appeal for both Mississauga locations, your target parent demographic around Ridgeway and Royal Windsor, and finalize the campaign strategy. The current enrollment data (${totalFilledSlots} filled "kid-week" slots out of ${totalCapacityKidWeeks} total) will serve as our baseline.</li>
        <li><strong>Implementation & Execution:</strong> Our team will build and launch your geo-targeted ad campaigns, develop the high-converting landing page(s), create engaging social content, and set up lead management processes.</li>
        <li><strong>Continuous Monitoring & Optimization:</strong> We will closely monitor ad performance, landing page conversions, and registration numbers <strong>per location and per week</strong>. We'll make data-driven adjustments to targeting, bids, and creatives, focusing on weeks and locations with the largest enrollment gaps.</li>
        <li><strong>Transparent Reporting & Communication:</strong> You will receive regular updates and clear reports on campaign progress, including ad spend, registrations generated (for Ridgeway and Royal Windsor separately), CPA, and insights.</li>
        <li><strong>Adaptation & Continuous Improvement:</strong> Our goal is continuous improvement to maximize enrollment at both your Mississauga locations.</li>
      </ol>
      
      <h3 class="text-xl font-semibold text-slate-700 mt-6 mb-3">Projected Pre-Camp Marketing Timeline & KPIs (May 15 - June 29):</h3>
      <p class="mb-4 text-slate-600">The following chart illustrates our projected marketing ramp-up leading to the first week of camp. These are initial projections and will be refined based on ongoing campaign performance and your budget decisions. Our focus will be on steadily increasing momentum, optimizing ad spend, and driving qualified leads and signups each week.</p>
      <div class="bg-slate-50 p-4 rounded-lg shadow mb-6">
        <div class="my-6" style="position: relative; min-height: 450px;">
          <canvas id="campaignTimelineChart"></canvas>
        </div>
      </div>
      <p class="text-sm text-slate-500">Note: "New Signups" refers to projected unique children enrolling each week, with revenue calculated at $${campPricePerWeek} per signup for that week. "Leads/Inquiries" represents initial expressions of interest (e.g., landing page form submissions, direct calls) which we will work to convert into full registrations.</p>
    `,
  },
  {
    title: '4. Key Deliverables for Summer Camp Success',
    id: 'key-deliverables',
    content: `
      <ul class="list-disc list-inside space-y-1 text-slate-600">
        <li>Active Google Ads & Facebook/Instagram Ad Campaigns: Geo-targeted for Ridgeway and Royal Windsor.</li>
        <li>High-Converting Summer Camp Landing Page(s): Optimized for registrations at both locations.</li>
        <li>Weekly (or Bi-Weekly) Performance Reports: Detailing registrations and CPA <strong>per location and per week</strong>, including progress against timeline projections.</li>
        <li>Content Plan & Assets for Social Media Promotion.</li>
        <li>Setup of Lead Management/Registration Tracking System (segmented by location).</li>
        <li>Email Templates for Parent Communication.</li>
        <li>Regular Strategy & Progress Meetings.</li>
      </ul>
    `,
  },
  {
    // Section 5: Investment - content remains the same
    title: '5. Investment for a Sold-Out Summer Camp (Both Locations)',
    id: 'investment',
    content: `
      <p class="mb-3 text-sm text-slate-500 italic">(This section requires significant customization. The added complexity of managing for two locations might influence pricing slightly, or it could be covered within a comprehensive package.)</p>
      <div class="space-y-6">
        <div>
          <h4 class="text-lg font-semibold text-slate-700 mb-2">Option 1: Comprehensive Camp Marketing & Management Package</h4>
          <p class="text-slate-600 mb-2">To manage the Google & Facebook ad campaigns for both Ridgeway and Royal Windsor locations, develop the landing page(s), support social media, and assist with lead management (targeting <strong>${weeklyCapacity} weekly registrations combined</strong>), our project fee is <strong>$[Amount] CAD</strong>.</p>
          <p class="text-slate-600 mb-2">This includes up to [Number] dedicated hours, reporting, and strategy sessions.</p>
          <p class="text-slate-600 mb-2"><strong>Ad Spend Budget:</strong> This is separate from our management fee. Based on the goal of filling approximately ${remainingKidWeekSlots} more "kid-week" slots and a target CPA below $${currentCPA} (per unique child, who may book multiple weeks), the ad spend will be carefully planned and managed. For instance, if we aim to acquire [e.g., 100-200 more unique children] who then fill these slots, the ad spend could range from (e.g., 100 children * $90 CPA = $9,000) to (e.g., 200 children * $90 CPA = $18,000). This is an estimate and will be refined based on how many weeks each new child signs up for on average.</p>
        </div>
        <div>
          <h4 class="text-lg font-semibold text-slate-700 mb-2">Option 2: Phased Approach (Example)</h4>
          <ul class="list-disc list-inside space-y-1 text-slate-600">
            <li><strong>Phase 1: Strategy, Setup & Launch (Month 1):</strong> Includes campaign strategy for two locations, ad account setup, landing page creation, and campaign launch. <strong>Investment:</strong> $[Amount] CAD</li>
            <li><strong>Phase 2: Ongoing Management & Optimization (Month 2 & 3 - or per month):</strong> Includes daily campaign management for both locations, A/B testing, reporting, and optimization. <strong>Investment:</strong> $[Amount] CAD per month.</li>
          </ul>
        </div>
        <div>
          <h4 class="text-lg font-semibold text-slate-700 mb-2">Payment Terms:</h4>
          <ul class="list-disc list-inside space-y-1 text-slate-600">
            <li>[Specify your terms].</li>
            <li>The proposed engagement duration is for the [e.g., 3-month] summer camp promotion period.</li>
          </ul>
        </div>
      </div>
    `,
  },
  {
    // Section 6: About - content remains the same
    title: `6. About ${consultantName}`,
    id: 'about-consultant',
    content: `
      <p class="mb-3 text-sm text-slate-500 italic">(Adapt to highlight experience with multi-location businesses if applicable, or managing localized campaigns.)</p>
      <p class="text-slate-600"><strong>Example Snippet:</strong></p>
      <blockquote class="border-l-4 border-sky-500 pl-4 italic text-slate-600 my-4">
        "${consultantName} is passionately dedicated to helping local businesses in the GTA, including Mississauga, like ${clientName}, achieve their growth objectives. We bring [X years] of experience in managing successful, localized Google Ads and Facebook Ad campaigns. We're about driving conversions, achieving your target CPA, and helping you fill those <strong>${weeklyCapacity} weekly summer camp spots across your Ridgeway and Royal Windsor locations</strong>."
      </blockquote>
    `,
  },
  {
    // Section 7: Next Steps - content remains the same
    title: `7. Next Steps: Let's Fill Your Summer Camp (Ridgeway & Royal Windsor)!`,
    id: 'next-steps',
    content: `
      <p class="mb-4">We are genuinely excited about the prospect of partnering with ${clientName} to make your 2025 summer camp a resounding success with <strong>full enrollment at both Ridgeway and Royal Windsor</strong>. To move forward:</p>
      <ol class="list-decimal list-inside space-y-2 text-slate-600">
        <li><strong>Follow-Up Discussion:</strong> To discuss this proposal, answer questions, and confirm the scope to best achieve your goal of <strong>${weeklyCapacity} weekly enrollments (${capacityPerLocation} per location)</strong> while targeting a CPA below $${currentCPA}.</li>
        <li><strong>Refinement & Agreement:</strong> Finalize scope, deliverables, and investment, followed by a formal SLA.</li>
        <li><strong>Onboarding & Campaign Kick-off:</strong> Comprehensive kick-off for both Mississauga locations.</li>
      </ol>
      <p class="mt-4">We look forward to helping ${clientName} welcome a full cohort of happy campers to Ridgeway and Royal Windsor this summer!</p>
    `,
  },
  {
    // Section 8: Terms - content remains the same
    title: '8. Terms and Conditions (Summary)',
    id: 'terms-conditions',
    content: `
      <ul class="list-disc list-inside space-y-1 text-slate-600">
        <li><strong>Client Responsibilities:</strong> Timely feedback, access to accounts, provision of camp details for Ridgeway and Royal Windsor (pricing $${campPricePerWeek}/week, 9 weeks duration), and any existing brand assets.</li>
        <li>(Other terms remain largely the same but ensure they apply to the context of two locations if necessary.)</li>
      </ul>
    `,
  },
];
---

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"
></script>
{/* Optional: For better date handling if needed, though weekly labels are simpler */}

<Layout metadata={metadata}>
  <div class="container mx-auto p-4 sm:p-8 max-w-4xl bg-white shadow-xl rounded-lg my-8">
    <header class="mb-8 text-center">
      <h1 class="text-sky-700">Proposal for Summer Camp Digital Marketing & Operations Management</h1>
      <p class="text-slate-500 text-sm">Prepared for: {clientName} ({contactPerson}, {clientTitle})</p>
      <p class="text-slate-500 text-sm">Prepared by: {consultantName}</p>
      <p class="text-slate-500 text-sm">Date: {date}</p>
    </header>

    <div class="mb-8 p-6 bg-sky-50 border border-sky-200 rounded-lg">
      <h2 class="!mt-0 !border-none text-sky-700">Subject: Fill Your {weeklyCapacity} Weekly Spots ({locations})!</h2>
      <p class="text-lg text-slate-700">Dear {contactPerson},</p>
      <p class="mt-2 text-slate-600">
        Thank you for the opportunity to discuss how {consultantName} can support {clientName} in achieving a highly successful
        summer camp season for your <strong>{locations}</strong>. We understand you're launching an exciting summer camp
        program for children aged 5-12 with a key goal of filling your <strong
          >combined weekly capacity of {weeklyCapacity} spots ({capacityPerLocation} spots per week at each location)</strong
        >. In today's digital world, a targeted and well-executed marketing strategy, combined with smooth operational
        processes, is essential to reach this goal.
      </p>
      <p class="mt-2 text-slate-600">
        This proposal outlines a comprehensive suite of services specifically designed to promote your Taekwondo summer
        camp, attract parents in the specific areas around each Mississauga location, drive registrations through
        effective Google and Facebook advertising campaigns, and manage the influx of new leads and participants. We are
        confident that our expertise can help {clientName} not only meet but exceed your summer camp enrollment targets for
        both locations.
      </p>
      <p class="mt-2 text-slate-600">
        We are enthusiastic about the potential of partnering with {clientName} and making this summer camp your most successful
        one yet!
      </p>
      <p class="mt-4 font-semibold text-slate-700">Sincerely,</p>
      <p class="text-slate-700">{consultantName}</p>
      {/* <p class="text-sm text-slate-500">[Your Title/Company if different from Name]</p> --> */}
    </div>

    {
      sections.map((section) => (
        <section id={section.id} class="mb-8 py-4">
          <h2 class="text-sky-600">{section.title}</h2>
          {section.content && (
            <div
              class="prose prose-slate max-w-none prose-headings:text-slate-700 prose-a:text-sky-600 hover:prose-a:text-sky-700"
              set:html={section.content}
            />
          )}
          {section.subSections &&
            section.subSections.map((subSection) => (
              <article class="mt-4 ml-4 p-4 border-l-2 border-sky-200 bg-slate-50/50 rounded-r-md">
                <h3 class="text-sky-600 !mt-0">{subSection.title}</h3>
                <div
                  class="prose prose-slate max-w-none prose-sm prose-headings:text-slate-700 prose-a:text-sky-600 hover:prose-a:text-sky-700"
                  set:html={subSection.content}
                />
              </article>
            ))}
        </section>
      ))
    }

    <footer class="mt-12 pt-6 border-t border-slate-300 text-center text-sm text-slate-500">
      <p>&copy; {new Date().getFullYear()} {consultantName}. All rights reserved.</p>
      <p>Proposal for {clientName}</p>
    </footer>
  </div>
</Layout>

<script
  is:inline
  define:vars={{ enrollmentData, ridgewayRemaining, royalWindsorRemaining, campaignTimelineData, campPricePerWeek }}
>
  // Chart.js script
  document.addEventListener('DOMContentLoaded', () => {
    // --- Enrollment Chart Initialization ---
    const enrollmentChartCtx = document.getElementById('enrollmentChart');
    if (enrollmentChartCtx) {
      new Chart(enrollmentChartCtx, {
        type: 'bar',
        data: {
          labels: enrollmentData.weeks,
          datasets: [
            {
              label: 'Ridgeway Signups',
              data: enrollmentData.ridgewaySignups,
              backgroundColor: 'rgba(56, 189, 248, 0.7)', // sky-500
              borderColor: 'rgba(56, 189, 248, 1)',
              borderWidth: 1,
              stack: 'Ridgeway',
            },
            {
              label: 'Ridgeway Remaining Spots',
              data: ridgewayRemaining,
              backgroundColor: 'rgba(203, 213, 225, 0.5)', // slate-300
              borderColor: 'rgba(203, 213, 225, 1)',
              borderWidth: 1,
              stack: 'Ridgeway',
            },
            {
              label: 'Royal Windsor Signups',
              data: enrollmentData.royalWindsorSignups,
              backgroundColor: 'rgba(34, 197, 94, 0.7)', // green-500
              borderColor: 'rgba(34, 197, 94, 1)',
              borderWidth: 1,
              stack: 'Royal Windsor',
            },
            {
              label: 'Royal Windsor Remaining Spots',
              data: royalWindsorRemaining,
              backgroundColor: 'rgba(203, 213, 225, 0.5)', // slate-300
              borderColor: 'rgba(203, 213, 225, 1)',
              borderWidth: 1,
              stack: 'Royal Windsor',
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            title: {
              display: true,
              text: 'Summer Camp Enrollment Status by Week & Location (Capacity: 80 per Location/Week)',
              font: { size: 16 },
            },
            tooltip: { mode: 'index', intersect: false },
            legend: { position: 'top' },
          },
          scales: {
            x: {
              title: { display: true, text: 'Camp Week' },
              stacked: true,
            },
            y: {
              title: { display: true, text: 'Number of Kids' },
              beginAtZero: true,
              stacked: true,
              max: enrollmentData.capacityPerLocation + 20,
            },
          },
        },
      });
    } else {
      console.error('Canvas element for enrollment chart not found!');
    }

    // --- Campaign Timeline Chart Initialization ---
    const timelineChartCtx = document.getElementById('campaignTimelineChart');
    if (timelineChartCtx) {
      const projectedRevenueData = campaignTimelineData.projectedNewSignups.map(
        (signups) => signups * campPricePerWeek
      );

      new Chart(timelineChartCtx, {
        type: 'bar', // Base type, will be mixed
        data: {
          labels: campaignTimelineData.labels,
          datasets: [
            {
              label: 'Projected Ad Spend ($)',
              data: campaignTimelineData.projectedAdSpend,
              backgroundColor: 'rgba(251, 146, 60, 0.7)', // orange-500
              borderColor: 'rgba(251, 146, 60, 1)',
              borderWidth: 1,
              yAxisID: 'yAdSpend',
              order: 3,
            },
            {
              label: 'Projected Leads/Inquiries',
              data: campaignTimelineData.projectedLeads,
              borderColor: 'rgba(16, 185, 129, 1)', // emerald-500
              backgroundColor: 'rgba(16, 185, 129, 0.1)',
              type: 'line',
              tension: 0.1,
              fill: true,
              yAxisID: 'ySignupsLeads',
              order: 2,
            },
            {
              label: 'Projected New Signups (Unique Children)',
              data: campaignTimelineData.projectedNewSignups,
              borderColor: 'rgba(59, 130, 246, 1)', // blue-500
              backgroundColor: 'rgba(59, 130, 246, 0.1)',
              type: 'line',
              tension: 0.1,
              fill: true,
              yAxisID: 'ySignupsLeads',
              order: 1,
            },
            {
              label: 'Cumulative Signups (Unique Children)',
              data: campaignTimelineData.cumulativeSignups,
              borderColor: 'rgba(139, 92, 246, 1)', // violet-500
              backgroundColor: 'rgba(139, 92, 246, 0.1)',
              type: 'line',
              tension: 0.1,
              fill: false,
              yAxisID: 'ySignupsLeads',
              order: 0,
            },
            {
              // NEW DATASET FOR PROJECTED REVENUE
              label: 'Projected Weekly Revenue ($)',
              data: projectedRevenueData,
              borderColor: 'rgba(217, 70, 239, 1)', // fuchsia-500
              backgroundColor: 'rgba(217, 70, 239, 0.5)',
              // type: 'line',
              tension: 0.1,
              fill: true, // Or true if you prefer a filled area
              yAxisID: 'yAdSpend', // Assign to a new Y axis
              order: 5, // Render this line on top, or adjust order as preferred
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            title: {
              display: true,
              text: 'Projected Pre-Camp Marketing Timeline & KPIs',
              font: { size: 16 },
            },
            tooltip: {
              mode: 'index',
              intersect: false,
              callbacks: {
                label: function (context) {
                  let label = context.dataset.label || '';
                  if (label) {
                    label += ': ';
                  }
                  if (context.parsed.y !== null) {
                    if (
                      context.dataset.label === 'Projected Ad Spend ($)' ||
                      context.dataset.label === 'Projected Weekly Revenue ($)'
                    ) {
                      label += new Intl.NumberFormat('en-US', { style: 'currency', currency: 'CAD' }).format(
                        context.parsed.y
                      );
                    } else {
                      label += context.parsed.y;
                    }
                  }
                  return label;
                },
              },
            },
            legend: { position: 'top' },
          },
          scales: {
            x: {
              title: { display: true, text: 'Pre-Camp Weeks' },
            },
            yAdSpend: {
              type: 'linear',
              display: true,
              position: 'left',
              title: {
                display: true,
                text: 'Projected Ad Spend/Revenue ($)',
              },
              grid: {
                drawOnChartArea: false,
              },
              ticks: {
                callback: function (value, index, values) {
                  return '$' + value.toLocaleString();
                },
              },
            },
            ySignupsLeads: {
              type: 'linear',
              display: true,
              position: 'right',
              title: {
                display: true,
                text: 'Projected Signups / Leads',
              },
              beginAtZero: true,
              grid: {
                drawOnChartArea: false, // Keep primary grid for revenue
              },
            },
          },
        },
      });
    } else {
      console.error('Canvas element for timeline chart not found!');
    }
  });
</script>
